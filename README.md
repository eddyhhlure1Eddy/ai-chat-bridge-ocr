# 🤖 AI Chat Bridge OCR - 非入侵性AI对话桥接器

基于OCR和屏幕截图的完全非入侵性AI对话桥接系统，通过视觉识别实现不同AI聊天界面之间的自动对话。

## 🌟 核心特性

- **完全非入侵**: 不操作浏览器DOM，不会被AI平台检测
- **通用兼容**: 支持任何聊天界面（网页、桌面应用等）
- **可视化配置**: 用户手动框选聊天区域，所见即所得
- **智能识别**: 基于OCR技术识别文字内容
- **自动对话**: 智能检测新消息并自动转发
- **对话记录**: 完整保存对话历史

## 🏗️ 系统架构

```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   左侧聊天区域   │    │   桥接器主界面    │    │   右侧聊天区域   │
│   (AI平台A)     │◄──►│  ┌─────────────┐  │◄──►│   (AI平台B)     │
│                 │    │  │  对话显示   │  │    │                 │
│  [用户框选区域]  │    │  │    区域     │  │    │  [用户框选区域]  │
└─────────────────┘    │  └─────────────┘  │    └─────────────────┘
                       │  ┌─────────────┐  │
                       │  │   控制面板   │  │
                       │  └─────────────┘  │
                       └──────────────────┘
```

## 🔧 技术栈

- **Python 3.8+**: 主要开发语言
- **tkinter**: GUI界面框架
- **Pillow**: 图像处理
- **pytesseract**: OCR文字识别
- **pyautogui**: 屏幕截图和自动输入
- **opencv-python**: 图像预处理
- **sqlite3**: 对话数据存储

## 🚀 快速开始

### 1. 环境准备

```bash
# 进入项目目录
cd ai-chat-bridge-ocr

# 安装Python依赖
pip install -r requirements.txt
```

### 2. 启动程序

**方式1：使用统一启动器（推荐）**
```bash
python launcher.py
```

**方式2：Windows用户双击**
```
启动器.bat
```

**方式3：直接启动主程序**
```bash
python main.py
```

### 3. 使用步骤

1. **打开AI聊天界面**: 在浏览器中打开两个不同的AI聊天页面
2. **启动桥接器**: 运行程序，显示主界面
3. **选择区域**: 
   - 点击"选择左侧区域"，框选第一个AI的聊天区域
   - 点击"选择右侧区域"，框选第二个AI的聊天区域
4. **开始对话**: 点击"开始桥接"，输入初始消息
5. **监控对话**: 在中间区域实时查看AI对话过程

## 📋 功能详解

### 区域选择工具
- 拖拽选择屏幕任意区域
- 实时预览选择效果
- 支持重新选择和调整

### OCR文字识别
- 多引擎支持（Tesseract + EasyOCR）
- 图像预处理优化识别率
- 智能去噪和文字提取

### 消息检测算法
- 基于内容差异检测新消息
- 时间戳记录避免重复处理
- 智能过滤系统消息和噪音

### 自动输入系统
- 模拟人类输入行为
- 随机延迟避免检测
- 支持复制粘贴和逐字输入

### 对话管理
- 完整记录对话历史
- 支持暂停/恢复对话
- 导出对话记录

## ⚙️ 配置选项

### config.json
```json
{
  "ocr": {
    "engine": "tesseract",  // tesseract 或 easyocr
    "language": "eng+chi_sim",
    "confidence_threshold": 60
  },
  "capture": {
    "interval": 2.0,  // 截图间隔(秒)
    "image_scale": 2.0  // 图像放大倍数
  },
  "typing": {
    "delay_min": 0.05,  // 最小按键延迟
    "delay_max": 0.15,  // 最大按键延迟
    "pause_probability": 0.1  // 随机暂停概率
  },
  "conversation": {
    "max_length": 100,  // 最大对话轮数
    "auto_save": true,  // 自动保存
    "save_interval": 10  // 保存间隔
  }
}
```

## 🎯 使用场景

### 支持的AI平台
- ✅ ChatGPT (网页版)
- ✅ Claude (网页版)
- ✅ Gemini (网页版)
- ✅ 文心一言
- ✅ 通义千问
- ✅ 任何基于文字的聊天界面

### 典型应用
- AI能力对比测试
- 多AI协作问题解决
- AI对话数据收集
- 教学演示和研究

## 🔒 安全特性

### 完全非入侵
- 不注入任何代码到浏览器
- 不修改网页内容
- 不访问浏览器API
- 仅通过视觉识别工作

### 隐私保护
- 所有数据本地存储
- 不上传任何信息到外部服务器
- 用户完全控制数据

### 检测规避
- 模拟真实人类操作
- 随机延迟和行为模式
- 无法被AI平台检测

## 🛠️ 高级功能

### 智能等待机制
- 检测"正在输入"状态
- 自适应等待时间
- 避免消息冲突

### 多语言支持
- 中英文混合识别
- 可配置OCR语言包
- 支持特殊字符和表情

### 错误处理
- OCR识别失败重试
- 网络异常处理
- 自动恢复机制

## 📊 性能优化

### OCR优化
- 图像预处理提升识别率
- 区域裁剪减少计算量
- 缓存机制避免重复识别

### 内存管理
- 及时释放图像资源
- 限制历史消息数量
- 定期清理临时文件

## 🐛 故障排除

### 常见问题

**OCR识别率低**
- 调整图像缩放比例
- 检查选择区域是否准确
- 尝试不同的OCR引擎

**自动输入失败**
- 确保目标输入框处于焦点
- 检查输入延迟设置
- 尝试不同的输入方法

**程序卡死或崩溃**
- 检查系统资源使用情况
- 降低截图频率
- 重启程序

### 调试模式
```bash
python main.py --debug
```

## 🤝 贡献指南

欢迎提交Issue和Pull Request！

### 开发环境设置
```bash
git clone <repository>
cd ai-chat-bridge-ocr
pip install -r requirements-dev.txt
```

### 代码规范
- 使用Black格式化代码
- 遵循PEP 8规范
- 添加适当的注释和文档

## 📄 许可证

MIT License - 详见 LICENSE 文件

---

**⚠️ 免责声明**: 本工具仅供学习和研究使用，请遵守各AI平台的使用条款，合理使用避免滥用。
